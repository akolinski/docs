<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link href="https://fonts.googleapis.com/css?family=Lato:300,400,700|Merriweather+Sans" rel="stylesheet">
  <link href="/docs/assets/main.css" rel="stylesheet">
  <link rel="alternate" type="application/rss+xml" title="Docs" href="/docs/feed.xml">
  
  <script defer src="https://use.fontawesome.com/releases/v5.0.6/js/all.js"></script>
</head>

  <body>
    <header class="site-header mb-5 pt-4 pb-4" role="banner">
  <div class="container">
    <div class="row justify-content-md-center">
      <div class="col-4">
        
        
        <a class="site-title" href="/docs/">Docs</a>
      </div>
      <div class="col-5">
        
          <nav class="site-nav float-right">
            <div class="trigger">
              
                
                
                <a class="page-link" href="/docs/about/">About</a>
                
              
                
                
              
                
                
              
                
                
              
            </div>
          </nav>
        
      </div>
    </div>
  </div>
</header>

    <main class="page-content" aria-label="Content">
        <div class="container">
  <div class="row justify-content-md-center">
    <div class="col-md-9">
      <article class="post" itemscope itemtype="http://schema.org/BlogPosting">
        <header class="post-header">
          <h1 class="post-title mb-5" itemprop="name headline">Installing Node.js in CentOS</h1>
          <p class="post-meta">
            <time datetime="2017-09-28T09:00:00+10:00" itemprop="datePublished">
              
              Sep 28, 2017
            </time>
            </p>
        </header>
        <div class="post-content" itemprop="articleBody">
          <blockquote class="blockquote">
The purpose of this documentation is to help with managing the version of Node.js and NPM in a CentOS.
</blockquote>

<h2 id="lets-begin">Lets begin</h2>

<p>Firstly I read this to get an understanding and what I need to remove within the CentOS VM: <a href="https://hungred.com/how-to/completely-removing-nodejs-npm/" target="blank">Completely removing nodejs npm</a></p>

<div class="highlighter-rouge"><pre class="highlight"><code>cd /usr/local/lib/node_modules
</code></pre>
</div>

<div class="highlighter-rouge"><pre class="highlight"><code>sudo rm -rf npm
</code></pre>
</div>

<div class="highlighter-rouge"><pre class="highlight"><code>cd /usr/local/lib/node_modules
</code></pre>
</div>

<div class="highlighter-rouge"><pre class="highlight"><code>sudo rm -rf npm
</code></pre>
</div>

<p>Check your Home directory for any “local” or “lib” or “include” folders, and delete any “node” or “node_modules” from there.</p>

<p>Go to /usr/local/bin and delete any node executable.</p>

<p>Then download nvm and follow the instructions to install node. The latest versions of node come with npm, I believe, but you can also reinstall that as well.</p>

<h2 id="download-nvm">Download nvm</h2>

<p><a href="https://github.com/creationix/nvm/blob/master/README.md" target="blank">Download nvm</a></p>

<p>Good article on <a href="https://davidwalsh.name/nvm" target="blank">managing Node.js versions with nvm</a>. Read about <a href="https://github.com/creationix/nvm/blob/master/README.md#usage" target="blank">nvm usage</a> and if you need information about <a href="https://nodejs.org/en/download/releases/" target="blank">version releases of Node.js</a>.</p>

<div class="highlighter-rouge"><pre class="highlight"><code>nvm install 7.0.0
</code></pre>
</div>

<div class="highlighter-rouge"><pre class="highlight"><code>nvm use --delete-prefix v7.0.0
</code></pre>
</div>

<div class="highlighter-rouge"><pre class="highlight"><code>node -v
</code></pre>
</div>

<div class="highlighter-rouge"><pre class="highlight"><code>npm -v
</code></pre>
</div>

<p>You should now have Node.js running with an updated version and npm installed. Go ahead and install all other things like bower, grunt or whatever your development environment consists of.</p>

<h2 id="more-node-more-problems">More node more problems</h2>

<p>We found that we had to play around with the version of certain npm packages. The command below helped with identifying the npm package installed.</p>

<div class="highlighter-rouge"><pre class="highlight"><code>npm list nameofpackage
</code></pre>
</div>

<h2 id="conclusion">Conclusion</h2>

<p>We can update all the npm packages below except for grunt-contrib-imagemin. The compression libraries it was using are not supported in CentOS version 5. These libraries would have to be updated.</p>

<p>An interim solution of using grunt-image instead of grunt-contrib-imagemin was implemented. We came across one problem with grunt-image which was to do with <a href="https://github.com/gruntjs/grunt-contrib-copy/issues/21">open file limits</a>. Setting the open file limit of our VM’s higher helped the task run without any problems. However it was only an issue due to trying to compress 933 images. If we abstract out tasks to specific tasks it’ll run faster.</p>

<div class="highlighter-rouge"><pre class="highlight"><code>ulimit -n 10480
</code></pre>
</div>

<blockquote class="blockquote">Running Node.js version 7.0.0 with npm version 3.10.8</blockquote>

<p>Package.json</p>

<div class="highlighter-rouge"><pre class="highlight"><code><span class="p">{</span><span class="w">
    </span><span class="nt">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Anonymous"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"version"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2.0.0"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"description"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Anonymous"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"author"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Anonymous"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"devDependencies"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nt">"grunt"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1.0.1"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"grunt-contrib-sass"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1.0.0"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"grunt-contrib-uglify"</span><span class="p">:</span><span class="w"> </span><span class="s2">"3.1.0"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"grunt-contrib-watch"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1.0.0"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"grunt-image"</span><span class="p">:</span><span class="w"> </span><span class="s2">"3.0.0"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"grunt-newer"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1.3.0"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"load-grunt-tasks"</span><span class="p">:</span><span class="w"> </span><span class="s2">"3.5.2"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"lodash"</span><span class="p">:</span><span class="w"> </span><span class="s2">"4.17.4"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"time-grunt"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1.4.0"</span><span class="w">
    </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
</div>

        </div>
        
      </article>
    </div>
  </div>
</div>
    </main>
    <footer class="site-footer mt-5 pt-4 pb-4">
  <div class="container">

    <div class="row justify-content-md-center">

      <div class="col-md-4">
        <ul class="list-unstyled">
          <li>
            
              Adam Kolinski
            
            </li>
            
            <li><a href="mailto:info@makeaweb.com.au">info@makeaweb.com.au</a></li>
            
        </ul>
      </div>

      <div class="col-md-5">
        <ul class="list-unstyled">
          
          <li>
            <a href="https://github.com/akolinski"><span class="icon icon--github"><svg viewBox="0 0 16 16" width="16px" height="16px"><path fill="#828282" d="M7.999,0.431c-4.285,0-7.76,3.474-7.76,7.761 c0,3.428,2.223,6.337,5.307,7.363c0.388,0.071,0.53-0.168,0.53-0.374c0-0.184-0.007-0.672-0.01-1.32 c-2.159,0.469-2.614-1.04-2.614-1.04c-0.353-0.896-0.862-1.135-0.862-1.135c-0.705-0.481,0.053-0.472,0.053-0.472 c0.779,0.055,1.189,0.8,1.189,0.8c0.692,1.186,1.816,0.843,2.258,0.645c0.071-0.502,0.271-0.843,0.493-1.037 C4.86,11.425,3.049,10.76,3.049,7.786c0-0.847,0.302-1.54,0.799-2.082C3.768,5.507,3.501,4.718,3.924,3.65 c0,0,0.652-0.209,2.134,0.796C6.677,4.273,7.34,4.187,8,4.184c0.659,0.003,1.323,0.089,1.943,0.261 c1.482-1.004,2.132-0.796,2.132-0.796c0.423,1.068,0.157,1.857,0.077,2.054c0.497,0.542,0.798,1.235,0.798,2.082 c0,2.981-1.814,3.637-3.543,3.829c0.279,0.24,0.527,0.713,0.527,1.437c0,1.037-0.01,1.874-0.01,2.129 c0,0.208,0.14,0.449,0.534,0.373c3.081-1.028,5.302-3.935,5.302-7.362C15.76,3.906,12.285,0.431,7.999,0.431z"/></svg>
</span><span class="username">akolinski</span></a>

          </li>
          
          
          <li>
            <a href="https://twitter.com/MAKEAWEB_"><span class="icon icon--twitter"><svg viewBox="0 0 16 16" width="16px" height="16px"><path fill="#828282" d="M15.969,3.058c-0.586,0.26-1.217,0.436-1.878,0.515c0.675-0.405,1.194-1.045,1.438-1.809c-0.632,0.375-1.332,0.647-2.076,0.793c-0.596-0.636-1.446-1.033-2.387-1.033c-1.806,0-3.27,1.464-3.27,3.27 c0,0.256,0.029,0.506,0.085,0.745C5.163,5.404,2.753,4.102,1.14,2.124C0.859,2.607,0.698,3.168,0.698,3.767 c0,1.134,0.577,2.135,1.455,2.722C1.616,6.472,1.112,6.325,0.671,6.08c0,0.014,0,0.027,0,0.041c0,1.584,1.127,2.906,2.623,3.206 C3.02,9.402,2.731,9.442,2.433,9.442c-0.211,0-0.416-0.021-0.615-0.059c0.416,1.299,1.624,2.245,3.055,2.271 c-1.119,0.877-2.529,1.4-4.061,1.4c-0.264,0-0.524-0.015-0.78-0.046c1.447,0.928,3.166,1.469,5.013,1.469 c6.015,0,9.304-4.983,9.304-9.304c0-0.142-0.003-0.283-0.009-0.423C14.976,4.29,15.531,3.714,15.969,3.058z"/></svg>
</span><span class="username">MAKEAWEB_</span></a>

          </li>
          
        </ul>
      </div>

    </div>

    <div class="row justify-content-md-center">
      <div class="col-md-9">
        <p>Free user documentation, research, tips, code snippets and templates.
</p>
      </div>
    </div>


  </div>
</footer>

  </body>
</html>