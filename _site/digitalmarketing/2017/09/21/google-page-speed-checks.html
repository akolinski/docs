<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1"><link href="https://fonts.googleapis.com/css?family=Lato:300,400,700|Merriweather+Sans" rel="stylesheet"><link href="/assets/main.css" rel="stylesheet"><link rel="alternate" type="application/rss+xml" title="Docs" href="/feed.xml"> <script defer src="https://use.fontawesome.com/releases/v5.0.6/js/all.js"></script></head><body> <header class="site-header mb-5 pt-4 pb-4" role="banner"><div class="container"><div class="row justify-content-md-center"><div class="col-4"> <a class="site-title" href="/">Docs</a></div><div class="col-5"> <nav class="site-nav float-right"><div class="trigger"> <a class="page-link" href="/about/">About</a></div> </nav></div></div></div> </header><main class="page-content" aria-label="Content"><div class="container"><div class="row justify-content-md-center"><div class="col-md-9"> <article class="post" itemscope itemtype="http://schema.org/BlogPosting"> <header class="post-header"><h1 class="post-title mb-5" itemprop="name headline">Google page speed checks</h1><p class="post-meta"> <time datetime="2017-09-21T09:00:00+10:00" itemprop="datePublished"> Sep 21, 2017 </time></p> </header><div class="post-content" itemprop="articleBody"><blockquote class="blockquote"> The purpose of this documentation is to identify the main offenders in reference to a page speed report. A series of tests will be carried out on fixing these problems. Notes on which improve the score the most will be recommended.</blockquote><p><a href="https://developers.google.com/speed/pagespeed/insights/">Google PageSpeed Insights</a></p><h2 id="optimizing">Optimizing</h2><p>Optimizing and image refers to the ability to make the file a smaller file size. A technique for reducing the file size is compression or delivering scaled image assets. “We are definitely not in a position to invent new compression techniques, but it’s important to understand the shape of the problem: RGBA pixels, bit-depth, and various optimization techniques.” <a href="https://developers.google.com/web/fundamentals/performance/optimizing-content-efficiency/image-optimization">Image Optimization</a> Optimizing an image is directly referenced to the data stored in individual pixels. Reading the <a href="https://developers.google.com/web/fundamentals/performance/optimizing-content-efficiency/image-optimization">Image Optimization</a> page from Google helps understand how to optimize raster images effectively.</p><h3 id="compression">Compression</h3><p>‘Image compression is a type of data compression applied to digital images, to reduce their cost for storage or transmission.’ <a href="https://en.wikipedia.org/wiki/Image_compression">Image compression</a></p><h4 id="lossless-vs-lossy-image-compression">Lossless vs lossy image compression</h4><p>Reading the heading <a href="https://developers.google.com/web/fundamentals/performance/optimizing-content-efficiency/image-optimization">Lossless vs lossy image compression</a> from Google will give a more detailed reading of the key points below. The different types of compression are instigated by the file format you use. They use different algorithms to encode the data stored in a file.</p><p>Lossy compression: or irreversible compression is the class of data encoding methods that uses inexact approximations and partial data discarding to represent the content. These techniques are used to reduce data size for storage, handling, and transmitting content.</p><p>Lossless compression: is a class of data compression algorithms that allows the original data to be perfectly reconstructed from the compressed data.</p><p>By contrast, lossy compression permits reconstruction only of an approximation of the original data, though this usually improves compression rates (and therefore reduces file sizes).</p><p>A typical image optimization pipeline consists of two high level steps:</p><ol><li>Image is processed with a “<a href="https://en.wikipedia.org/wiki/Lossy_compression">lossy</a>” filter that eliminates some pixel data</li><li>Image is processed with a “<a href="https://en.wikipedia.org/wiki/Lossless_compression">lossless</a>” filter that compresses the pixel data</li></ol><p>“So, what is the “optimal” configuration of lossy and lossless optimization? The answer depends on the image contents and your own criteria such as the tradeoff between filesize and artifacts introduced by lossy compression: in some cases you may want to skip lossy optimization to communicate intricate detail in its full fidelity, and in others you may be able to apply aggressive lossy optimization to reduce the filesize of the image asset. This is where your own judgment and context need to come into play - there is no one universal setting.</p><p>As a hands-on example, when using a lossy format such as JPEG, the compressor will typically expose a customisable “quality” setting (for example, the quality slider provided by the “Save for Web” functionality in Adobe Photoshop), which is typically a number between 1 and 100 that controls the inner workings of the specific collection of lossy and lossless algorithms. For best results, experiment with various quality settings for your images, and don’t be afraid to dial down the quality - the visual results are often very good and the filesize savings can be quite large.”</p><h4 id="what-file-type-should-i-be-using-png-or-jpeg">What file type should I be using (PNG or JPEG)</h4><p>Do you need to preserve fine detail with highest resolution? Use PNG.</p><ul><li><p>PNG does not apply any lossy compression algorithms beyond the choice of the size of the color palette. As a result, it will produce the highest quality image, but at a cost of significantly higher filesize than other formats. Use judiciously.</p></li><li><p>If the image asset contains imagery composed of geometric shapes, consider converting it to a vector (SVG) format!</p></li><li><p>If the image asset contains text, stop and reconsider. Text in images is not selectable, searchable, or “zoomable”. If you need to convey a custom look (for branding or other reasons), use a web font instead.</p></li></ul><p>Are you optimizing a photo, screenshot, or a similar image asset? Use JPEG.</p><ul><li>JPEG uses a combination of lossy and lossless optimization to reduce filesize of the image asset. Try several JPEG quality levels to find the best quality vs. filesize tradeoff for your asset.</li></ul><h3 id="delivering-scaled-image-assets">Delivering scaled image assets</h3><p>As a result, one of the simplest and most effective image optimization techniques is to ensure that we are not shipping any more pixels than needed to display the asset at its intended size in the browser. Sounds simple, right? Unfortunately, most pages fail this test for many of their image assets: typically, they ship larger assets and rely on the browser to rescale them - which also consumes extra CPU resources - and display them at a lower resolution.</p><h2 id="testing">Testing</h2><h3 id="optimize-images">Optimize images</h3><p><a href="https://tinypng.com/">tinyjpg</a></p><h4 id="image-test-scenario-1-jpg-square-image">Image test scenario 1 (JPG) (Square image)</h4><table class="table table-bordered"><tr><th>File size</th><th>Image dimensions</th><th>Google Page Speed</th></tr><tr><th>311 KB</th><th>1440px width 1440px height</th><th>50/100</th></tr></table><p>Changes: Lossy and lossless compression + delivering scaled image. Take the needed image size from inspect element and double the width.</p><p>For example: 245 x 2 = 490 width</p><p>Use photoshop on the original image. Image &gt; Image size. Enter the new width and make sure the height automatically adjusts to scale the image. Use the save for web option. Save out the file at 100% quality with no options selected.</p><p>Then use <a href="https://tinyjpg.com/">tinyjpg</a> to apply lossy and lossless compression on the file.</p><table class="table table-bordered"><tr><th>New file size</th><th>New image dimensions</th><th>Google Page Speed</th></tr><tr><th>41 KB</th><th>490px width 490px height</th><th>51/100</th></tr></table><h4 id="image-test-scenario-2-jpg-long-image">Image test scenario 2 (JPG) (Long image)</h4><table class="table table-bordered"><tr><th>File size</th><th>Image dimensions</th><th>Google Page Speed</th></tr><tr><th>356 KB</th><th>1440px width 2016px height</th><th>51/100</th></tr></table><p>Changes: Lossy and lossless compression + delivering scaled image. Take the needed image size from inspect element and double the width and height</p><p>For example: 245 x 2 = 490 width For example: 343 x 2 = 686 height</p><p>Use photoshop and create a new file with the dimensions 490px width and 686px height. Drag the original image inside photoshop and scale the image without losing quality in the new dimensions. Use the save for web option. Save out the file at 100% quality with no options selected.</p><p>Then use <a href="https://tinyjpg.com/">tinyjpg</a> to apply lossy and lossless compression on the file.</p><table class="table table-bordered"><tr><th>New file size</th><th>New image dimensions</th><th>Google Page Speed</th></tr><tr><th>102 KB</th><th>490px width 490px height</th><th>53/100</th></tr></table><h4 id="testing-image-in-pagespeed">Testing image in PageSpeed</h4><p>We are testing the threshold in Google to try and understand how they give recommendations on optimizing images. Currently the sites score sits at 96/100.</p><ul><li>Image test 1000w x 1000h = 525kb</li></ul><p>Adding this image https://makeaweb.com.au/images/uploads/os-test-1000x1000.jpg made my PageSpeed go down from 96/100 to 66/100</p><blockquote class="blockquote">Compressing and resizing https://makeaweb.com.au/images/uploads/os-test-1000x1000.jpg could save 474.2KiB (90% reduction).</blockquote><ul><li>Image test 500w x 500h - no compression = 199kb</li></ul><p>Adding this image https://makeaweb.com.au/images/uploads/os-test-500x500.jpg made my PageSpeed go down from 96/100 to 84/100</p><blockquote class="blockquote">Compressing https://makeaweb.com.au/images/uploads/os-test-500x500.jpg could save 143.3KiB (72% reduction).</blockquote><ul><li>Image test 1000w x 1000h - Compressed to file size of 500 by 500 image = 201kb</li></ul><p>Adding this image https://makeaweb.com.au/images/uploads/os-test-1000x1000-compressed.jpg made my PageSpeed go down from 96/100 to 84/100</p><blockquote class="blockquote">Compressing and resizing https://makeaweb.com.au/…uploads/os-test-1000x1000-compressed.jpg could save 145.7KiB (74% reduction).</blockquote><ul><li>Image test 1000w x 1000h - Compressed to file size 55kb</li></ul><p>Adding the same image but compressed to 55kb https://makeaweb.com.au/images/uploads/os-test-1000x1000-compressed-55kb.jpg made my PageSpeed go down from 96/100 to 89 / 100</p><blockquote class="blockquote">No image recommendations</blockquote><h4 id="what-we-found">What we found</h4><p>Even if you compress and image down by the percentage needed recommended by google, it will still complain about scaling images down to needed size.</p><h3 id="conclusion">Conclusion</h3><p>We found that optimizing images using <a href="https://tinyjpg.com/">tinyjpg</a> over using photoshop has no real benefit. It is better to use Photoshop as you have more control over the type of compression that is being used.</p><p>Following the test in scenario 1 and 2 will give an improvement to page speed. I followed these methods for 5 images and got an improvement from 50/100 to 60/100. Each image will have different original image dimensions. Optimization of each image should be dealt with individually.</p><p>Using the <a href="/docs/digitalmarketing/2017/09/21/google-page-speed-checks.html">image checklist</a> will help identify some keys points to consider when optimizing images. Make sure to use the correct image format for the situation. Lastly always ask yourself the question what value does the image bring. If the image doesn’t constitute meaning, what purpose does that image really have?</p><h2 id="enable-compression">Enable compression</h2><p>Make sure any files that are loaded externally or internally are compressed.</p><h2 id="minify-javascript">Minify JavaScript</h2><p>Make sure any JavaScript that is being used is using the minified version. Combined performance gain from enabling compression and minifying javascript for one file 79/100 to 85/100.</p><h2 id="eliminate-render-blocking-javascript-and-css-in-above-the-fold-content">Eliminate render-blocking JavaScript and CSS in above-the-fold content</h2><p>There is no real fix for this because we can’t simply remove css that we need. We do not want to inline CSS either.</p><h2 id="minify-html">Minify HTML</h2><p>We can minify stash embeds without much of a problem. However to remove the suggested message from Google we need to minify the whole template. We should be able to do this, we need to check whether jQuery functionality is still working once implemented. We had a couple of jQuery validation problems with jQuery in script tags in templates. JSLint was used to try to resolve this issue but to no avail. In page jQuery was abstracted to a page specific javascript file using Uglify. We had a score improve from 84/100 to 86/100.</p><h2 id="reading">Reading</h2><p><a href="https://developers.google.com/speed/pagespeed/insights/">Google PageSpeed Insights</a></p><p><a href="https://developers.google.com/web/fundamentals/performance/optimizing-content-efficiency/image-optimization">Image Optimization</a></p><p><a href="https://developers.google.com/web/fundamentals/performance/optimizing-content-efficiency/image-optimization">Lossless vs lossy image compression</a></p><p><a href="https://en.wikipedia.org/wiki/Image_compression">Image compression</a></p><p><a href="https://en.wikipedia.org/wiki/Lossy_compression">lossy</a></p><p><a href="https://en.wikipedia.org/wiki/Lossless_compression">lossless</a></p><p><a href="https://developers.google.com/speed/webp/docs/compression">compression techniques</a></p><p><a href="/docs/digitalmarketing/2017/09/21/google-page-speed-checks.html">image checklist</a></p></div> </article></div></div></div> </main> <footer class="site-footer mt-5 pt-4 pb-4"><div class="container"><div class="row justify-content-md-center"><div class="col-md-4"><ul class="list-unstyled"><li> Adam Kolinski</li><li><a href="mailto:info@makeaweb.com.au">info@makeaweb.com.au</a></li></ul></div><div class="col-md-5"><ul class="list-unstyled"><li> <a href="https://github.com/akolinski"><span class="icon icon--github"><svg viewBox="0 0 16 16" width="16px" height="16px"><path fill="#828282" d="M7.999,0.431c-4.285,0-7.76,3.474-7.76,7.761 c0,3.428,2.223,6.337,5.307,7.363c0.388,0.071,0.53-0.168,0.53-0.374c0-0.184-0.007-0.672-0.01-1.32 c-2.159,0.469-2.614-1.04-2.614-1.04c-0.353-0.896-0.862-1.135-0.862-1.135c-0.705-0.481,0.053-0.472,0.053-0.472 c0.779,0.055,1.189,0.8,1.189,0.8c0.692,1.186,1.816,0.843,2.258,0.645c0.071-0.502,0.271-0.843,0.493-1.037 C4.86,11.425,3.049,10.76,3.049,7.786c0-0.847,0.302-1.54,0.799-2.082C3.768,5.507,3.501,4.718,3.924,3.65 c0,0,0.652-0.209,2.134,0.796C6.677,4.273,7.34,4.187,8,4.184c0.659,0.003,1.323,0.089,1.943,0.261 c1.482-1.004,2.132-0.796,2.132-0.796c0.423,1.068,0.157,1.857,0.077,2.054c0.497,0.542,0.798,1.235,0.798,2.082 c0,2.981-1.814,3.637-3.543,3.829c0.279,0.24,0.527,0.713,0.527,1.437c0,1.037-0.01,1.874-0.01,2.129 c0,0.208,0.14,0.449,0.534,0.373c3.081-1.028,5.302-3.935,5.302-7.362C15.76,3.906,12.285,0.431,7.999,0.431z"/></svg> </span><span class="username">akolinski</span></a></li><li> <a href="https://twitter.com/MAKEAWEB_"><span class="icon icon--twitter"><svg viewBox="0 0 16 16" width="16px" height="16px"><path fill="#828282" d="M15.969,3.058c-0.586,0.26-1.217,0.436-1.878,0.515c0.675-0.405,1.194-1.045,1.438-1.809c-0.632,0.375-1.332,0.647-2.076,0.793c-0.596-0.636-1.446-1.033-2.387-1.033c-1.806,0-3.27,1.464-3.27,3.27 c0,0.256,0.029,0.506,0.085,0.745C5.163,5.404,2.753,4.102,1.14,2.124C0.859,2.607,0.698,3.168,0.698,3.767 c0,1.134,0.577,2.135,1.455,2.722C1.616,6.472,1.112,6.325,0.671,6.08c0,0.014,0,0.027,0,0.041c0,1.584,1.127,2.906,2.623,3.206 C3.02,9.402,2.731,9.442,2.433,9.442c-0.211,0-0.416-0.021-0.615-0.059c0.416,1.299,1.624,2.245,3.055,2.271 c-1.119,0.877-2.529,1.4-4.061,1.4c-0.264,0-0.524-0.015-0.78-0.046c1.447,0.928,3.166,1.469,5.013,1.469 c6.015,0,9.304-4.983,9.304-9.304c0-0.142-0.003-0.283-0.009-0.423C14.976,4.29,15.531,3.714,15.969,3.058z"/></svg> </span><span class="username">MAKEAWEB_</span></a></li></ul></div></div><div class="row justify-content-md-center"><div class="col-md-9"><p>Free user documentation, research, tips, code snippets and templates.</p></div></div></div> </footer></body></html>